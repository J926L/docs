version: '3'

dotenv: ['.env']

tasks:
  sync:
    desc: Interpolate env vars into template and convert to JSON
    cmds:
      # envsubst ä¼šæ›¿æ¢ ${VAR}ï¼Œç„¶å yq è½¬æ¢ä¸º JSON
      - envsubst < mcp_config.yaml | yq . > mcp_config.json
      - echo "âœ… Sync complete (Template + Env -> JSON)"
      - |
        if [ -d "$HOME/.config/Claude" ]; then
          cp mcp_config.json "$HOME/.config/Claude/config.json"
          echo "ğŸš€ Synced to Claude Desktop"
        fi
